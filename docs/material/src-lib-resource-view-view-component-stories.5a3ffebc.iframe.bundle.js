(self.webpackChunk_techbir_source=self.webpackChunk_techbir_source||[]).push([[27],{"./libs/material/src/lib/api/local-storage.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{gy:()=>LocalStoreService});class LocalStoreService{constructor(storageName){this.storageName=storageName}itemName(name){return`${this.storageName}_${name}`}set(key,value){const valueAsString=JSON.stringify(value);localStorage.setItem(this.itemName(key),valueAsString)}get(key){const value=localStorage.getItem(this.itemName(key));if(null!=value)return JSON.parse(value)}}},"./libs/material/src/lib/api/resource.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Pj:()=>ENTITY_NAME_TOKEN,zc:()=>ResourceService});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.1/node_modules/tslib/tslib.es6.mjs"),http=__webpack_require__("./node_modules/.pnpm/@angular+common@16.2.0_@angular+core@16.2.0_rxjs@7.8.1/node_modules/@angular/common/fesm2022/http.mjs"),core=__webpack_require__("./node_modules/.pnpm/@angular+core@16.2.0_rxjs@7.8.1_zone.js@0.13.0/node_modules/@angular/core/fesm2022/core.mjs"),ngrx_data=__webpack_require__("./node_modules/.pnpm/@ngrx+data@16.3.0_@angular+common@16.2.0_@angular+core@16.2.0_@ngrx+effects@16.3.0_@ngrx+enti_6kuft62vpebc24xzoho6ledwgq/node_modules/@ngrx/data/fesm2022/ngrx-data.mjs"),debounceTime=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),map=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/map.js"),catchError=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/catchError.js"),of=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/of.js");function splitByUppercase(className){const result=[className[0]],asList=className.split("").slice(1);for(const v of asList)v.charCodeAt(0)<=90&&v.charCodeAt(0)>=65&&result.push("_"),result.push(v);return result.join("")}function uppercaseFirst(name){return[name[0].toUpperCase(),name.slice(1)].join("")}function __className(name){return name.split("-").map((e=>uppercaseFirst(e))).join("")}function __propertyName(name){return function lowercaseFirst(name){return[name[0].toLowerCase(),name.slice(1)].join("")}(name.split("-").map((e=>uppercaseFirst(e))).join(""))}function __constName(name){return splitByUppercase(name).split("_").map((e=>e.toUpperCase())).join("_").split("-").join("_")}function __fileName(name){return splitByUppercase(name).split("_").map((e=>e.toLowerCase())).join("-")}const ENTITY_NAME_TOKEN="ENTITY_NAME_TOKEN";let ResourceService=class ResourceService extends ngrx_data.c8{constructor(entityName,serviceElementsFactory){super(entityName,serviceElementsFactory),this.nameVariants=function names(name){return{className:__className(name),fileName:__fileName(name),propertyName:__propertyName(name),constName:__constName(name)}}(this.entityName),this.allCount$=(0,core.inject)(http.eN).get(`api/meta/count/${this.nameVariants.fileName}`).pipe((0,debounceTime.b)(1e3),(0,map.U)((value=>{const count=value?.count;return null!=count?count:999999})),(0,catchError.K)((()=>(0,of.of)(99999999))))}nid(){return(new Date).getTime()}deleteItem(id){return this.removeOneFromCache(id)}updateItem(item){return this.updateOneInCache(item)}saveItem(item){this.add({...item,id:this.nid()})}queryItem(query){this.clearCache(),this.getWithQuery(function excludeUndefined(obj){return Object.entries(obj).filter((([,value])=>null!=value)).map((([key,value])=>({[key]:value}))).reduce(((p,c)=>({...p,...c})))}(query),{mergeStrategy:ngrx_data.Kp.OverwriteChanges})}static#_=this.ctorParameters=()=>[{type:String,decorators:[{type:core.Inject,args:[ENTITY_NAME_TOKEN]}]},{type:ngrx_data.yV}]};ResourceService=(0,tslib_es6.gn)([(0,core.Injectable)({providedIn:"root",useExisting:!0}),(0,tslib_es6.w6)("design:paramtypes",[String,ngrx_data.yV])],ResourceService)},"./libs/material/src/lib/table/table.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>TableComponent});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.1/node_modules/tslib/tslib.es6.mjs");var table_componentngResource=__webpack_require__("./libs/material/src/lib/table/table.component.css?ngResource"),table_componentngResource_default=__webpack_require__.n(table_componentngResource),core=__webpack_require__("./node_modules/.pnpm/@angular+core@16.2.0_rxjs@7.8.1_zone.js@0.13.0/node_modules/@angular/core/fesm2022/core.mjs"),table=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/table.mjs"),paginator=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/paginator.mjs"),sort=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/sort.mjs"),debounceTime=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),map=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/map.js"),merge=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/observable/merge.js"),tap=__webpack_require__("./node_modules/.pnpm/rxjs@7.8.1/node_modules/rxjs/dist/esm5/internal/operators/tap.js"),resource_service=__webpack_require__("./libs/material/src/lib/api/resource.service.ts"),local_storage_service=__webpack_require__("./libs/material/src/lib/api/local-storage.service.ts");var common=__webpack_require__("./node_modules/.pnpm/@angular+common@16.2.0_@angular+core@16.2.0_rxjs@7.8.1/node_modules/@angular/common/fesm2022/common.mjs"),icon=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/icon.mjs"),fesm2022_button=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/button.mjs"),fesm2022_forms=__webpack_require__("./node_modules/.pnpm/@angular+forms@16.2.0_@angular+common@16.2.0_@angular+core@16.2.0_@angular+platform-browser@16.2.0_rxjs@7.8.1/node_modules/@angular/forms/fesm2022/forms.mjs"),form_field=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/form-field.mjs"),input=__webpack_require__("./node_modules/.pnpm/@angular+material@16.2.10_@angular+animations@16.2.0_@angular+cdk@16.2.10_@angular+common@16._vdpb67cjfuaa2o36xq2h7l5hzq/node_modules/@angular/material/fesm2022/input.mjs");let PluralPipe=class PluralPipe{transform(value){return function plural(value){const lowerName=value.toLowerCase();if(lowerName&&lowerName.length>0)return/^\w+[^euioa]y$/i.test(lowerName)?value.slice(0,-1)+"ies":lowerName.endsWith("o")?value+"es":value+"s";throw new Error("Name is undefined!")}(value)}};PluralPipe=(0,tslib_es6.gn)([(0,core.Pipe)({name:"plural",standalone:!0})],PluralPipe);var angular_animations=__webpack_require__("./node_modules/.pnpm/angular-animations@0.11.0_@angular+animations@16.2.0/node_modules/angular-animations/fesm2015/angular-animations.js");__webpack_require__("./node_modules/.pnpm/@angular+localize@16.2.12_@angular+compiler-cli@16.2.11_@angular+compiler@16.2.11/node_modules/@angular/localize/fesm2022/init.mjs");let TableComponent=class TableComponent{constructor(service,lss,tableColumns,searchControl){this.service=service,this.lss=lss,this.tableColumns=tableColumns,this.searchControl=searchControl,this.entityName=this.service.entityName,this.count$=this.service.allCount$,this.data=[],this.data$=this.service.filteredEntities$.pipe((0,debounceTime.b)(400),(0,map.U)((data=>{this.data=[];let i=0;for(const d of data)setTimeout((()=>{this.data=[...this.data,d]}),50*i),i++}))),this.pageSize=this.lss.get("pageSize")||20,this.pageIndex=this.lss.get("pageIndex")||0,this.active=this.lss.get("active")||"id",this.direction=this.lss.get("direction")||"asc"}ngOnInit(){const dColumns=this.lss.get("visibleColumns");this.columns=this.tableColumns.map((e=>e.name)),dColumns?(this.visibleColumns=[...dColumns],this.displayedColumns=this.visibleColumns.map((e=>e.name))):(this.visibleColumns=[...this.tableColumns],this.displayedColumns=[...this.columns]),this.columns.unshift("id"),this.displayedColumns.unshift("id")}ngAfterViewInit(){this.tableEvents$=(0,merge.T)(this.matPage.page,this.matSort.sortChange,this.searchControl.valueChanges).pipe((0,debounceTime.b)(600),(0,tap.b)((value=>{this.getAll()})),(0,map.U)((value=>value))),this.getAll()}ngOnDestroy(){const pageIndex=this.matPage.pageIndex,pageSize=this.matPage.pageSize;this.lss.set("pageIndex",pageIndex),this.lss.set("pageSize",pageSize);const direction=this.matSort.direction,active=this.matSort.active;this.lss.set("direction",direction),this.lss.set("active",active)}getAll(){this.service.queryItem(this.prepareQuery())}prepareQuery(){return{take:this.matPage.pageSize,skip:this.matPage.pageIndex*this.matPage.pageSize,orderBy:this.matSort.active,orderDir:this.matSort.direction,search:this.searchControl.value||void 0,withDeleted:!1}}static#_=this.ctorParameters=()=>[{type:resource_service.zc},{type:local_storage_service.gy},{type:Array,decorators:[{type:core.Inject,args:["TABLE_COLUMNS_TOKEN"]}]},{type:fesm2022_forms.NI,decorators:[{type:core.Inject,args:["SEARCH_CONTROL_TOKEN"]}]}];static#_2=this.propDecorators={matPage:[{type:core.ViewChild,args:[paginator.NW]}],matSort:[{type:core.ViewChild,args:[sort.YE]}]}};TableComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"techbir-table",template:'<ng-container *ngIf="tableEvents$ | async"></ng-container>\n<ng-container *ngIf="data$ | async"></ng-container>\n\n<div>\n  <mat-form-field\n    style="\n      position: sticky;\n      top: 0px;\n      z-index: 1;\n      width: 100%;\n      cursor: pointer;\n      letter-spacing: 1px;\n    "\n  >\n    <mat-label i18n>Search {{ entityName | plural }}</mat-label>\n    <input\n      matInput\n      type="search"\n      autocomplete="off"\n      [formControl]="searchControl"\n    />\n    <mat-icon matPrefix color="primary">search</mat-icon>\n  </mat-form-field>\n  <table\n    mat-table\n    [dataSource]="data"\n    class="full-width-table"\n    matSort\n    aria-label="Elements"\n    [matSortActive]="active"\n    [matSortDirection]="direction"\n  >\n    \x3c!-- Id Column --\x3e\n    <ng-container matColumnDef="id">\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>#</th>\n      <td mat-cell *matCellDef="let row">{{ row.id }}</td>\n    </ng-container>\n\n    <ng-container [matColumnDef]="col.name" *ngFor="let col of visibleColumns">\n      <th mat-header-cell *matHeaderCellDef mat-sort-header>\n        <div class="table-th">\n          <mat-icon color="primary">{{ col.icon }}</mat-icon>\n          <span>{{ col.label }}</span>\n        </div>\n      </th>\n      <td mat-cell *matCellDef="let row">{{ row[col.name] }}</td>\n    </ng-container>\n\n    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n    <tr mat-row *matRowDef="let row; columns: displayedColumns" [@enter]></tr>\n  </table>\n\n  <mat-paginator\n    #paginator\n    [pageSize]="pageSize"\n    [pageIndex]="pageIndex"\n    [length]="count$ | async"\n    [pageSizeOptions]="[2, 5, 10, 20, 30, 40, 50, 100]"\n    [showFirstLastButtons]="true"\n    aria-label="Select page"\n    style="position: sticky; bottom: 0px"\n  >\n  </mat-paginator>\n</div>\n',standalone:!0,imports:[common.CommonModule,form_field.lN,input.c,fesm2022_forms.UX,fesm2022_forms.u5,icon.Ps,fesm2022_button.ot,table.p0,paginator.TU,sort.JX,PluralPipe],animations:[(0,angular_animations.nh)({anchor:"enter",duration:200})],styles:[table_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[resource_service.zc,local_storage_service.gy,Array,fesm2022_forms.NI])],TableComponent)},"./libs/material/src/lib/resource/view/view.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Heading:()=>Heading,Primary:()=>Primary,default:()=>view_component_stories});var asyncToGenerator=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.22.6/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.6.1/node_modules/tslib/tslib.es6.mjs");var view_componentngResource=__webpack_require__("./libs/material/src/lib/resource/view/view.component.scss?ngResource"),view_componentngResource_default=__webpack_require__.n(view_componentngResource),core=__webpack_require__("./node_modules/.pnpm/@angular+core@16.2.0_rxjs@7.8.1_zone.js@0.13.0/node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/.pnpm/@angular+common@16.2.0_@angular+core@16.2.0_rxjs@7.8.1/node_modules/@angular/common/fesm2022/common.mjs");var table_component=__webpack_require__("./libs/material/src/lib/table/table.component.ts");let ViewComponent=class ViewComponent{constructor(viewComponent){this.viewComponent=table_component.a,viewComponent&&(this.viewComponent=viewComponent)}static#_=this.ctorParameters=()=>[{type:void 0,decorators:[{type:core.Optional},{type:core.Inject,args:["VIEW_COMPONENT_TOKEN"]}]}]};ViewComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"techbir-view",standalone:!0,imports:[common.CommonModule],template:'<ng-container *ngIf="viewComponent">\n  <ng-container *ngComponentOutlet="viewComponent"></ng-container>\n</ng-container>\n\n<p *ngIf="!viewComponent">View component is not provided!</p>\n',styles:[view_componentngResource_default()]}),(0,tslib_es6.w6)("design:paramtypes",[Object])],ViewComponent);var dist=__webpack_require__("./node_modules/.pnpm/@storybook+testing-library@0.2.0/node_modules/@storybook/testing-library/dist/index.mjs"),esm=__webpack_require__("./node_modules/.pnpm/@storybook+jest@0.1.0/node_modules/@storybook/jest/dist/esm/index.js");const view_component_stories={component:ViewComponent,title:"ViewComponent"},Primary={args:{}},Heading={args:{},play:(_ref=(0,asyncToGenerator.Z)((function*({canvasElement}){const canvas=(0,dist.uh)(canvasElement);(0,esm.l)(canvas.getByText(/view works!/gi)).toBeTruthy()})),function play(_x){return _ref.apply(this,arguments)})};var _ref},"./libs/material/src/lib/table/table.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.88.2/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".full-width-table {\n  width: 100%;\n}\n\ntable{ \n  overflow: hidden;\n}\n\n.table-th{ \n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  \n  gap: 1em;\n}\n",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/material/src/lib/resource/view/view.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.88.2/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@6.8.1_webpack@5.88.2/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"?5370":()=>{}}]);